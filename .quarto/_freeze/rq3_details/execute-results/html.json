{
  "hash": "2575cd45be8f7c0faeaebb8021751a3b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"RQ3 Details: Statistical Validation of Player Impact\"\nformat:\n  html:\n    theme: cosmo\n    toc: true\n    code-fold: true\n---\n\n\n\n\n## Purpose of This Section\n\nThis section provides **statistical validation and deeper analysis** supporting Research Question 3. While `rq3.qmd` focused on defining and visualizing player impact groups, this page formally tests whether the observed differences between **high-impact** and **low-impact** skaters are statistically meaningful.\n\nThe goal is to move beyond descriptive analytics and demonstrate **inferential rigor**, which is essential for an academic final project.\n\n---\n\n## Data Preparation\n\nWe reuse the cleaned dataset and the **Impact Score** defined previously. Players are grouped into **High Impact** and **Low Impact** categories using quartile-based thresholds.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tidyverse' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'ggplot2' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tibble' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tidyr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'readr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'purrr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'dplyr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'stringr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'forcats' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'lubridate' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.6\n✔ forcats   1.0.1     ✔ stringr   1.6.0\n✔ ggplot2   4.0.1     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.2.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(knitr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'knitr' was built under R version 4.5.2\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(effectsize)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'effectsize' was built under R version 4.5.2\n```\n\n\n:::\n:::\n\n\n\n\n# Load data\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read.csv(\"D:/GMU homeworks/STAT515/final proj/skaters.csv\")\n```\n:::\n\n\n\n\n\n# Select and clean relevant columns\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_clean <- df %>%\nselect(name, season, shifts,\nxGoalsForAfterShifts,\nxGoalsAgainstAfterShifts) %>%\nmutate(across(where(is.character), as.factor),\nacross(where(is.numeric), as.numeric)) %>%\nfilter(shifts > 0)\n```\n:::\n\n\n\n\n\n# Impact score definition\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_clean <- df_clean %>%\nmutate(impact_score = (xGoalsForAfterShifts - xGoalsAgainstAfterShifts) / shifts)\n```\n:::\n\n\n\n\n\n# Define impact groups using quartiles\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq25 <- quantile(df_clean$impact_score, 0.25, na.rm = TRUE)\nq75 <- quantile(df_clean$impact_score, 0.75, na.rm = TRUE)\n\ndf_groups <- df_clean %>%\nmutate(impact_group = case_when(\nimpact_score >= q75 ~ \"High Impact\",\nimpact_score <= q25 ~ \"Low Impact\",\nTRUE ~ NA_character_\n)) %>%\nfilter(!is.na(impact_group))\n```\n:::\n\n\n\n\n---\n\n## Descriptive Statistics by Impact Group\n\nBefore hypothesis testing, we summarize the central tendency and spread of impact scores in each group.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_groups %>%\ngroup_by(impact_group) %>%\nsummarise(\nn = n(),\nmean_impact = mean(impact_score, na.rm = TRUE),\nmedian_impact = median(impact_score, na.rm = TRUE),\nsd_impact = sd(impact_score, na.rm = TRUE)\n) %>%\nkable(digits = 4)\n```\n\n::: {.cell-output-display}\n\n\n|impact_group |    n| mean_impact| median_impact| sd_impact|\n|:------------|----:|-----------:|-------------:|---------:|\n|High Impact  | 1059|      0.0036|        0.0018|    0.0107|\n|Low Impact   | 3029|     -0.0004|        0.0000|    0.0038|\n\n\n:::\n:::\n\n\n\n\n\nThese statistics already suggest a **substantial separation** between the two groups, motivating formal hypothesis testing.\n\n---\n\n## Hypothesis Formulation\n\nWe test whether high-impact players truly outperform low-impact players in terms of the defined impact score.\n\n* **Null Hypothesis (H₀):** There is no difference in mean impact score between high-impact and low-impact players.\n* **Alternative Hypothesis (H₁):** High-impact players have a significantly higher mean impact score than low-impact players.\n\n---\n\n## Independent Samples t-Test\n\nGiven the two independent groups, we apply a two-sample t-test.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt_test <- t.test(\nimpact_score ~ impact_group,\ndata = df_groups,\nalternative = \"greater\"\n)\n\nt_test\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tWelch Two Sample t-test\n\ndata:  impact_score by impact_group\nt = 11.869, df = 1150.4, p-value < 2.2e-16\nalternative hypothesis: true difference in means between group High Impact and group Low Impact is greater than 0\n95 percent confidence interval:\n 0.003440634         Inf\nsample estimates:\nmean in group High Impact  mean in group Low Impact \n             0.0035921996             -0.0004024715 \n```\n\n\n:::\n:::\n\n\n\n\n\n### Interpretation\n\n* A **small p-value (p < 0.05)** provides strong evidence against the null hypothesis.\n* This indicates that the difference in impact scores is **statistically significant**, not due to random variation.\n\n---\n\n## Effect Size (Practical Significance)\n\nStatistical significance alone is insufficient. We compute **Cohen’s d** to quantify the magnitude of the difference.\n\ncohens_d <- cohens_d(impact_score ~ impact_group, data = df_groups)\ncohens_d\n\n### Effect Size Interpretation\n\n* **Small effect:** d ≈ 0.2\n* **Medium effect:** d ≈ 0.5\n* **Large effect:** d ≥ 0.8\n\nA medium-to-large effect size suggests that impact group membership has **practical relevance**, not just statistical significance.\n\n---\n\n## Distribution Comparison\n\nVisualizing the distributions helps validate test assumptions and interpret results intuitively.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\nggplot(df_groups, aes(x = impact_score, fill = impact_group)) +\ngeom_density(alpha = 0.5) +\nlabs(\ntitle = \"Impact Score Distributions by Player Group\",\nx = \"Impact Score\",\ny = \"Density\",\nfill = \"Group\"\n) +\ntheme_minimal()\n```\n\n::: {.cell-output-display}\n![](rq3_details_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n\n\nThe limited overlap between distributions visually supports the statistical findings.\n\n---\n\n## Robustness Check: Wilcoxon Rank-Sum Test\n\nBecause hockey performance metrics may deviate from normality, we also conduct a **non-parametric test**.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwilcox.test(\nimpact_score ~ impact_group,\ndata = df_groups,\nalternative = \"greater\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tWilcoxon rank sum test with continuity correction\n\ndata:  impact_score by impact_group\nW = 3207711, p-value < 2.2e-16\nalternative hypothesis: true location shift is greater than 0\n```\n\n\n:::\n:::\n\n\n\n\nConsistent conclusions across parametric and non-parametric tests strengthen confidence in the results.\n\n---\n\n## Key Findings\n\n* High-impact skaters significantly outperform low-impact skaters based on shift-adjusted expected goals.\n* The observed difference is **statistically significant** and **practically meaningful**.\n* Results are robust across multiple testing frameworks.\n\n---\n\n## Connection to the Overall Project\n\nThis detailed analysis reinforces Research Question 3 by:\n\n* Validating the impact metric statistically\n* Demonstrating rigorous analytical methodology\n* Providing defensible evidence suitable for academic evaluation\n\nTogether with `rq3.qmd`, this section completes a full descriptive + inferential treatment of player impact.\n\n---\n\n\n\n\n",
    "supporting": [
      "rq3_details_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}