{"title":"RQ2 — Predicting Special Teams Versatility Score (STVS)","markdown":{"yaml":{"title":"RQ2 — Predicting Special Teams Versatility Score (STVS)","format":{"html":{"theme":"cosmo","toc":true,"code-fold":true}}},"headingText":"1. Introduction","containsRefs":false,"markdown":"\n\nThis section provides the detailed empirical analysis for **Research Question 2**, focusing on identifying players who demonstrate strong versatility on special teams. Rather than evaluating power-play (PP) and penalty-kill (PK) performance in isolation, we construct a unified metric—the **Special Teams Versatility Score (STVS)**—that captures both offensive and defensive contributions.\n\n---\n\n## 2. Data Loading and Preparation\n\n### 2.1 Load Libraries\n```{r}\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(randomForest)\n```\n\n\n\n### 2.2 Load Dataset\n\n```{r}\ndf <- read_csv(\"D:/GMU homeworks/STAT515/final proj/skaters.csv\")\n```\n\n\n### 2.3 Standardize Naming Conventions\n\n```{r}\ndf <- df %>%\n  rename(\n    player = name,\n    toi = icetime\n  )\n```\n\n\n---\n\n## 3. Variable Selection and Validation\n\n### 3.1 Required Columns\n\nWe use on-ice expected-goals metrics as proxies for special-teams performance.\n\n```{r}\nreq_cols <- c(\n  \"player\",\n  \"season\",\n  \"OnIce_F_xGoals\",\n  \"OnIce_A_xGoals\",\n  \"toi\"\n)\n\nmissing_cols <- setdiff(req_cols, names(df))\nif (length(missing_cols) > 0) {\n  stop(\"Missing required columns: \", paste(missing_cols, collapse = \", \"))\n}\n```\n\n\n---\n\n## 4. Constructing the STVS Metric\n\n### 4.1 Power Play and Penalty Kill Proxies\n\n* **PP Impact**: On-ice expected goals for\n* **PK Impact**: Negative of on-ice expected goals against\n\n```{r}\ndf <- df %>%\n  mutate(\n    pp_impact = as.numeric(OnIce_F_xGoals),\n    pk_impact = -as.numeric(OnIce_A_xGoals)\n  )\n```\n\n\n### 4.2 Standardization\n\n```{r}\ndf <- df %>%\n  mutate(\n    pp_z = scale(pp_impact)[,1],\n    pk_z = scale(pk_impact)[,1],\n    STVS = pp_z + pk_z\n  )\n```\n\n\n---\n\n## 5. Exploratory Analysis\n\n### 5.1 Distribution of STVS\n\n\n```{r}\nggplot(df, aes(x = STVS)) +\n  geom_histogram(bins = 40, fill = \"darkorange\", alpha = 0.75) +\n  labs(\n    title = \"Distribution of Special Teams Versatility Score\",\n    x = \"STVS\",\n    y = \"Number of Players\"\n  ) +\n  theme_minimal()\n```\n\n\n\n---\n\n### 5.2 Top Players by STVS\n\n```{r}\ndf %>%\n  arrange(desc(STVS)) %>%\n  select(player, season, STVS, pp_impact, pk_impact) %>%\n  head(15) %>%\n  kable(caption = \"Top Players by Special Teams Versatility Score\")\n```\n\n\n---\n\n## 6. Predictive Modeling: Random Forest\n\n### 6.1 Model Data Preparation\n\n```{r}\nrf_data <- df %>%\n  select(STVS, pp_impact, pk_impact, toi) %>%\n  drop_na()\n```\n\n\n### 6.2 Train Random Forest Model\n\n```{r}\nset.seed(515)\nrf_model <- randomForest(\n  STVS ~ pp_impact + pk_impact + toi,\n  data = rf_data,\n  importance = TRUE\n)\n```\n\n\n---\n\n### 6.3 Feature Importance\n\n```{r}\nvarImpPlot(rf_model, main = \"Random Forest Feature Importance for STVS\")\n```\n\n\n---\n\n## 7. Interpretation\n\nThe Random Forest model highlights both offensive (PP) and defensive (PK) components as critical drivers of special-teams versatility. Time on ice further moderates these effects, reflecting coaching trust and deployment context.\n\nPlayers with high STVS scores are therefore those who consistently contribute under both numerical advantage and disadvantage.\n\n---\n\n## 8. Conclusion\n\nRQ2 demonstrates that special-teams versatility can be quantified using a composite expected-goals-based metric. The STVS framework provides teams with a data-driven approach to identifying multi-role contributors and optimizing lineup decisions.\n\n➡️ **Next:** `rq3.qmd` — On-Ice vs Off-Ice Impact Delta\n","srcMarkdownNoYaml":"\n## 1. Introduction\n\nThis section provides the detailed empirical analysis for **Research Question 2**, focusing on identifying players who demonstrate strong versatility on special teams. Rather than evaluating power-play (PP) and penalty-kill (PK) performance in isolation, we construct a unified metric—the **Special Teams Versatility Score (STVS)**—that captures both offensive and defensive contributions.\n\n---\n\n## 2. Data Loading and Preparation\n\n### 2.1 Load Libraries\n```{r}\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(randomForest)\n```\n\n\n\n### 2.2 Load Dataset\n\n```{r}\ndf <- read_csv(\"D:/GMU homeworks/STAT515/final proj/skaters.csv\")\n```\n\n\n### 2.3 Standardize Naming Conventions\n\n```{r}\ndf <- df %>%\n  rename(\n    player = name,\n    toi = icetime\n  )\n```\n\n\n---\n\n## 3. Variable Selection and Validation\n\n### 3.1 Required Columns\n\nWe use on-ice expected-goals metrics as proxies for special-teams performance.\n\n```{r}\nreq_cols <- c(\n  \"player\",\n  \"season\",\n  \"OnIce_F_xGoals\",\n  \"OnIce_A_xGoals\",\n  \"toi\"\n)\n\nmissing_cols <- setdiff(req_cols, names(df))\nif (length(missing_cols) > 0) {\n  stop(\"Missing required columns: \", paste(missing_cols, collapse = \", \"))\n}\n```\n\n\n---\n\n## 4. Constructing the STVS Metric\n\n### 4.1 Power Play and Penalty Kill Proxies\n\n* **PP Impact**: On-ice expected goals for\n* **PK Impact**: Negative of on-ice expected goals against\n\n```{r}\ndf <- df %>%\n  mutate(\n    pp_impact = as.numeric(OnIce_F_xGoals),\n    pk_impact = -as.numeric(OnIce_A_xGoals)\n  )\n```\n\n\n### 4.2 Standardization\n\n```{r}\ndf <- df %>%\n  mutate(\n    pp_z = scale(pp_impact)[,1],\n    pk_z = scale(pk_impact)[,1],\n    STVS = pp_z + pk_z\n  )\n```\n\n\n---\n\n## 5. Exploratory Analysis\n\n### 5.1 Distribution of STVS\n\n\n```{r}\nggplot(df, aes(x = STVS)) +\n  geom_histogram(bins = 40, fill = \"darkorange\", alpha = 0.75) +\n  labs(\n    title = \"Distribution of Special Teams Versatility Score\",\n    x = \"STVS\",\n    y = \"Number of Players\"\n  ) +\n  theme_minimal()\n```\n\n\n\n---\n\n### 5.2 Top Players by STVS\n\n```{r}\ndf %>%\n  arrange(desc(STVS)) %>%\n  select(player, season, STVS, pp_impact, pk_impact) %>%\n  head(15) %>%\n  kable(caption = \"Top Players by Special Teams Versatility Score\")\n```\n\n\n---\n\n## 6. Predictive Modeling: Random Forest\n\n### 6.1 Model Data Preparation\n\n```{r}\nrf_data <- df %>%\n  select(STVS, pp_impact, pk_impact, toi) %>%\n  drop_na()\n```\n\n\n### 6.2 Train Random Forest Model\n\n```{r}\nset.seed(515)\nrf_model <- randomForest(\n  STVS ~ pp_impact + pk_impact + toi,\n  data = rf_data,\n  importance = TRUE\n)\n```\n\n\n---\n\n### 6.3 Feature Importance\n\n```{r}\nvarImpPlot(rf_model, main = \"Random Forest Feature Importance for STVS\")\n```\n\n\n---\n\n## 7. Interpretation\n\nThe Random Forest model highlights both offensive (PP) and defensive (PK) components as critical drivers of special-teams versatility. Time on ice further moderates these effects, reflecting coaching trust and deployment context.\n\nPlayers with high STVS scores are therefore those who consistently contribute under both numerical advantage and disadvantage.\n\n---\n\n## 8. Conclusion\n\nRQ2 demonstrates that special-teams versatility can be quantified using a composite expected-goals-based metric. The STVS framework provides teams with a data-driven approach to identifying multi-role contributors and optimizing lineup decisions.\n\n➡️ **Next:** `rq3.qmd` — On-Ice vs Off-Ice Impact Delta\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":3,"number-sections":true,"css":["style.css"],"output-file":"rq2_details.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","theme":"cosmo","toc-location":"left","code-summary":"Show / Hide Code","smooth-scroll":true,"title":"RQ2 — Predicting Special Teams Versatility Score (STVS)"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}